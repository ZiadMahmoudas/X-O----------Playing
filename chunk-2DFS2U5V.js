import{a as U}from"./chunk-D3ZEN3NJ.js";import{O as r,R as n,V as u,W as p,Wb as o,m as i}from"./chunk-22QBDJS3.js";var h=class s{constructor(e){this.http=e}currentUserSource=new i(null);currentUserSubject=new i(null);updateUserProfile(e){this.currentUserSubject.next(e)}currentUser$=this.currentUserSource.asObservable();baseURL=p(U);getAllUsers(){return this.http.get(`${this.baseURL}User`)}deleteUser(e){return this.http.delete(`${this.baseURL}User/${e}`)}updateCurrentUser(e){this.currentUserSource.next(e)}getCurrentUserById(e){return this.http.get(`${this.baseURL}User/${e}`).pipe(r(t=>{let a=t.data||t;this.updateCurrentUser(a)}))}updateNameUser(e,t){let a={id:e,userName:t};return this.http.put(`${this.baseURL}User/${e}`,a,{withCredentials:!0}).pipe(r(()=>this.getCurrentUserById(e)))}uploadImageUser(e){return this.http.post(`${this.baseURL}User/upload-profile-image`,e).pipe(r(()=>{this.getCurrentUserById(this.currentUserSource.value?.id||0)}))}GetAllImageForUser(){return this.http.get(`${this.baseURL}User/my-images`)}setActiveImage(e){return this.http.put(`${this.baseURL}User/set-active-image/${e}`,{}).pipe(r(()=>{let t=this.currentUserSource.value;t&&(t.profileImageUrl=`${this.baseURL}User/get-image/${e}`,this.updateCurrentUser(t))}))}static \u0275fac=function(t){return new(t||s)(u(o))};static \u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"})};export{h as a};
