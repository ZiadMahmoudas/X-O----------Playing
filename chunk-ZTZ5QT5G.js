import{d as L,e as F}from"./chunk-2EPKHZCL.js";import{h as Y}from"./chunk-IRDK2I2U.js";import{a as R,b as m,c as T,d as z,i as N,j as A,k as q,l as D,o as V,q as j}from"./chunk-2GGCCMO2.js";import{c as I}from"./chunk-D3ZEN3NJ.js";import{$ as f,Aa as v,Ga as P,Ib as E,Jb as S,Na as d,Oa as c,Sb as k,Ta as p,Ua as i,Va as r,Wa as h,aa as _,ab as M,cb as C,eb as x,ga as w,jb as O,kb as y,nb as g,pb as s,ra as a,va as l}from"./chunk-22QBDJS3.js";var B=["passwordInput"];function G(n,o){n&1&&(i(0,"small",11),s(1,"Email is required"),r())}function Q(n,o){n&1&&(i(0,"small",11),s(1,"Please enter a valid email address"),r())}function H(n,o){if(n&1&&(d(0,G,2,0,"small",11),d(1,Q,2,0,"small",11)),n&2){let t=x();c(t.email.errors!=null&&t.email.errors.required?0:-1),a(),c(t.email.errors!=null&&t.email.errors.pattern?1:-1)}}function U(n,o){n&1&&(i(0,"small",11),s(1,"Password is required"),r())}function $(n,o){if(n&1&&d(0,U,2,0,"small",11),n&2){let t=x();c(t.password.errors!=null&&t.password.errors.required?0:-1)}}function J(n,o){n&1&&(i(0,"small",11),s(1,"Invalid email or password"),r())}var Z=class n{constructor(o,t,e,u,b,K){this.FB=o;this.auth=t;this.toastr=e;this.router=u;this.cdRef=b;this.ngZone=K;this.loginForm=this.FB.group({email:["",[m.required,m.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/)]],password:["",[m.required]]})}isEyeOpen=w(!0);passwordInputRef=E("passwordInput");loginForm;invalidLogin=!1;ngAfterViewChecked(){this.auth.getAccessToken()&&this.router.navigate(["/games"]),this.cdRef.detectChanges()}togglePasswordEye(){let o=this.passwordInputRef()?.nativeElement;o&&this.isEyeOpen.update(t=>{let e=!t;return o.type=e?"password":"text",e})}get email(){return this.loginForm.controls.email}get password(){return this.loginForm.controls.password}onsubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched(),this.toastr.warning("Please fill in all required fields correctly.");return}this.auth.login(this.loginForm.value).subscribe({next:o=>{setTimeout(()=>{this.ngZone.run(()=>{this.cdRef.detectChanges()})},0),this.auth.saveNewTokens(o.accessToken),this.toastr.success("Login Successfully"),this.router.navigateByUrl("/games"),this.invalidLogin=!1,console.log(o)},error:o=>{console.error(o),this.toastr.error("Invalid email or password","Login Failed"),this.invalidLogin=!0}})}static \u0275fac=function(t){return new(t||n)(l(V),l(I),l(Y),l(L),l(S),l(P))};static \u0275cmp=v({type:n,selectors:[["app-login"]],viewQuery:function(t,e){t&1&&O(e.passwordInputRef,B,5),t&2&&y()},decls:24,vars:18,consts:[["passwordInput",""],[1,"fullScreen"],[1,"signup-container"],[3,"ngSubmit","formGroup"],[1,"input-group"],["for","email"],["formControlName","email","type","text","id","email","name","Email","placeholder","Please Enter Your Email","required",""],[1,"input-group","password-toggle"],["for","password"],["formControlName","password","type","password","id","password","name","password","placeholder","Please Enter Your password","required",""],[1,"fa-duotone","fa-light","fa-eye","toggle-password",3,"click"],[1,"error-message"],["routerLink","/ForgetPassword",1,"forget"],["type","submit",3,"disabled"],[1,"btn","btn-secondary","mt-3",3,"routerLink"]],template:function(t,e){if(t&1){let u=M();i(0,"div",1)(1,"div",2)(2,"h2"),s(3,"Login"),r(),i(4,"form",3),C("ngSubmit",function(){return f(u),_(e.onsubmit())}),i(5,"div",4)(6,"label",5),s(7,"Email"),r(),h(8,"input",6),r(),d(9,H,2,2),i(10,"div",7)(11,"label",8),s(12,"password"),r(),h(13,"input",9,0),i(15,"i",10),C("click",function(){return f(u),_(e.togglePasswordEye())}),r()(),d(16,$,1,1),d(17,J,2,0,"small",11),i(18,"a",12),s(19,"ForgetPassword"),r(),i(20,"button",13),s(21,"^login^"),r()(),i(22,"a",14),s(23,"Signup"),r()()()}t&2&&(a(4),p("formGroup",e.loginForm),a(4),g("error",e.email.invalid&&e.email.touched)("success",e.email.valid&&e.email.touched),a(),c(e.email.invalid&&e.email.touched?9:-1),a(4),g("error",e.password.invalid&&e.password.touched||e.invalidLogin)("success",e.password.valid&&e.password.touched),a(2),g("fa-eye",e.isEyeOpen())("fa-eye-slash",!e.isEyeOpen()),a(),c(e.password.invalid&&e.password.touched?16:-1),a(),c(e.invalidLogin?17:-1),a(3),p("disabled",e.loginForm.invalid),a(2),p("routerLink","/Signup"))},dependencies:[F,j,N,R,T,z,D,A,q,k],styles:['.fullScreen[_ngcontent-%COMP%]{font-family:Cairo,sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;color:#333}.signup-container[_ngcontent-%COMP%]{background-color:#fff;padding:40px;border-radius:15px;box-shadow:0 10px 30px #0003;width:100%;max-width:450px;text-align:center;animation:_ngcontent-%COMP%_fadeIn .8s ease-out;margin-top:64px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:25px;font-size:2em;position:relative}h2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;transform:translate(-50%);width:60px;height:4px;background-color:#2575fc;border-radius:2px}.input-group[_ngcontent-%COMP%]{margin-bottom:20px;text-align:right}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:8px;font-weight:600;color:#555;font-size:.95em}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 20px);padding:12px 10px;border:1px solid #ddd;border-radius:8px;font-size:1em;transition:border-color .3s ease,box-shadow .3s ease}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#2575fc;box-shadow:0 0 0 3px #2575fc33;outline:none}.password-toggle[_ngcontent-%COMP%]{position:relative}.password-toggle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 20px);padding:12px 40px 12px 10px;border:1px solid #ddd;border-radius:8px;font-size:1em;transition:border-color .3s ease,box-shadow .3s ease;box-sizing:border-box}.password-toggle[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;top:71%;right:32px;transform:translateY(-71%);cursor:pointer;color:#aaa;font-size:1.1em;transition:color .3s ease}.password-toggle[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#666}.password-toggle[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{position:absolute;left:10px;top:50%;transform:translateY(-50%);cursor:pointer;color:#aaa;font-size:1.1em;transition:color .3s ease}.password-toggle[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]:hover{color:#666}button[_ngcontent-%COMP%]{background-color:#2575fc;color:#fff;padding:15px 30px;border:none;border-radius:8px;font-size:1.1em;font-weight:600;cursor:pointer;transition:background-color .3s ease,transform .2s ease;width:100%;margin-top:20px}button[_ngcontent-%COMP%]:hover{background-color:#1a5acb;transform:translateY(-2px)}.social-signup[_ngcontent-%COMP%]{margin-top:25px;border-top:1px solid #eee;padding-top:25px}.social-signup[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:15px;font-size:.9em}.social-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}.social-button[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ddd;padding:12px 20px;border-radius:8px;cursor:pointer;transition:background-color .3s ease,transform .2s ease;display:flex;align-items:center;gap:8px;font-size:.9em;color:#444;text-decoration:none}.social-button[_ngcontent-%COMP%]:hover{background-color:#e9e9e9;transform:translateY(-2px)}.social-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.login-link[_ngcontent-%COMP%]{margin-top:25px;font-size:.9em;color:#666}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2575fc;text-decoration:none;font-weight:600;transition:color .3s ease}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1a5acb;text-decoration:underline}.input-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:red;box-shadow:0 0 0 3px #d6010133;outline:none}.input-group[_ngcontent-%COMP%]   input.success[_ngcontent-%COMP%]{border-color:#0f0;box-shadow:0 0 0 3px #01d60133;outline:none}input.error[_ngcontent-%COMP%]{border:1px solid red}input.success[_ngcontent-%COMP%]{border:1px solid green}.error-message[_ngcontent-%COMP%]{color:red;font-size:.8em;margin-top:-10px;margin-bottom:10px;display:block}.forget[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}']})};export{Z as Login};
