import{b,d as P}from"./chunk-2EPKHZCL.js";import{c as S}from"./chunk-D3ZEN3NJ.js";import{$ as u,Aa as _,Ea as w,Qb as h,Sb as x,Ta as d,Ua as n,Va as r,aa as m,ab as g,cb as p,eb as f,nb as v,pb as o,ra as c,va as a}from"./chunk-22QBDJS3.js";function E(s,i){s&1&&(n(0,"div",4)(1,"p"),o(2,"Please wait, confirming password change..."),r()())}function I(s,i){if(s&1){let e=g();n(0,"div",5)(1,"p"),o(2,"Password changed successfully!"),r(),n(3,"button",6),p("click",function(){u(e);let l=f();return m(l.redirectToLogin())}),o(4,"Go to Login"),r()()}s&2&&(c(3),v("success-button",!0))}function y(s,i){if(s&1){let e=g();n(0,"div",7)(1,"p"),o(2,"Password change request was cancelled."),r(),n(3,"button",6),p("click",function(){u(e);let l=f();return m(l.redirectToLogin())}),o(4,"Go to Login"),r()()}s&2&&(c(3),v("error-button",!0))}var C=class s{constructor(i,e,t){this.authService=i;this.router=e;this.route=t}isSuccess=!1;isError=!1;loading=!0;ngOnInit(){this.route.queryParams.subscribe(i=>{let e=i.action,t=i.token;e&&t?e==="cancel"?(this.loading=!1,this.isError=!0):(this.isSuccess=!0,this.loading=!1,this.confirmPassword(t,e)):(this.loading=!1,this.isError=!0)})}confirmPassword(i,e){this.authService.confirmPasswordChange(i,e).subscribe({next:t=>{this.loading=!1,t.message.toLowerCase().includes("success")?this.isSuccess=!0:this.isError=!0},error:t=>{this.loading=!1,this.isError=!0,console.error("Error confirming password change:",t)}})}redirectToLogin(){this.router.navigate(["/login"])}static \u0275fac=function(e){return new(e||s)(a(S),a(P),a(b))};static \u0275cmp=_({type:s,selectors:[["app-success-password"]],decls:6,vars:3,consts:[[1,"confirm-password-container"],["class","loading-message",4,"ngIf"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"loading-message"],[1,"success-message"],[3,"click"],[1,"error-message"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"h2"),o(2,"Confirm Your Password Change"),r(),w(3,E,3,0,"div",1)(4,I,5,2,"div",2)(5,y,5,2,"div",3),r()),e&2&&(c(3),d("ngIf",t.loading),c(),d("ngIf",t.isSuccess),c(),d("ngIf",t.isError))},dependencies:[x,h],styles:[".confirm-password-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;background-color:#f8f9fa;border-radius:8px;box-shadow:0 4px 8px #0000001a}.success-message[_ngcontent-%COMP%]{color:green;font-size:1.2rem;margin:20px 0}.error-message[_ngcontent-%COMP%]{color:red;font-size:1.2rem;margin:20px 0}.pending-message[_ngcontent-%COMP%]{color:orange;font-size:1.2rem;margin:20px 0}button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#218838}"]})};export{C as SuccessPassword};
